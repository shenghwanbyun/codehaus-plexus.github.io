<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.8.1 from src/site/apt/guides/writing-components/02_diving_in.apt at 2018-05-08
 | Rendered using Apache Maven Fluido Skin 1.7
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="author" content="Rahul Thakur" />
    <meta name="Date-Revision-yyyymmdd" content="20180508" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Plexus &#x2013; Writing your first Plexus Component</title>
    <link rel="stylesheet" href="../../css/apache-maven-fluido-1.7.min.css" />
    <link rel="stylesheet" href="../../css/site.css" />
    <link rel="stylesheet" href="../../css/print.css" media="print" />
    <script type="text/javascript" src="../../js/apache-maven-fluido-1.7.min.js"></script>
<link rel="icon" href="/favicon.ico" type="image/x-icon" />
      <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
  </head>
  <body class="topBarDisabled">
    <div class="container-fluid">
      <div id="banner">
        <div class="pull-left"><a href="../.././" id="bannerLeft"><img src="../../images/plexus-logo-trans.png"  alt="Plexus"/></a></div>
        <div class="pull-right"></div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
      <li class=""><a href="../../" title="Plexus">Plexus</a><span class="divider">/</span></li>
    <li class="active ">Writing your first Plexus Component <a href="http://github.com/codehaus-plexus/codehaus-plexus.github.io/tree/source/src/site/apt/guides/writing-components/02_diving_in.apt"><img src="../../images/accessories-text-editor.png" title="Edit" /></a></li>
        <li id="publishDate" class="pull-right"><span class="divider">|</span> Last Published: 2018-05-08</li>
      <li class="pull-right"><a href="../.././" title="Plexus">Plexus</a></li>
        </ul>
      </div>
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
    <ul class="nav nav-list">
      <li class="nav-header">Plexus</li>
    <li><a href="../../index.html" title="Overview"><span class="none"></span>Overview</a></li>
      <li class="nav-header">Old IoC Documentation</li>
    <li><a href="../../" title="Books"><span class="icon-chevron-right"></span>Books</a></li>
    <li><a href="../../" title="Guides"><span class="icon-chevron-right"></span>Guides</a></li>
    <li><a href="../../" title="Reference"><span class="icon-chevron-right"></span>Reference</a></li>
      <li class="nav-header">Community</li>
    <li><a href="../../mail-lists.html" title="Mailing Lists"><span class="none"></span>Mailing Lists</a></li>
    <li><a href="../../irc.html" title="IRC"><span class="none"></span>IRC</a></li>
    <li><a href="../../get-involved.html" title="Get Involved"><span class="none"></span>Get Involved</a></li>
      <li class="nav-header">Project Documentation</li>
    <li><a href="../../project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a></li>
      <li class="nav-header">Plexus Projects</li>
    <li><a href="../../modello/" title="Modello"><span class="none"></span>Modello</a></li>
    <li><a href="../../plexus-classworlds/" title="Plexus Classworlds"><span class="none"></span>Plexus Classworlds</a></li>
    <li><a href="../../" title="Plexus Components"><span class="icon-chevron-down"></span>Plexus Components</a>
    <ul class="nav nav-list">
    <li><a href="../../plexus-archiver/" title="Plexus Archiver"><span class="none"></span>Plexus Archiver</a></li>
    <li><a href="../../plexus-cli/" title="Plexus CLI"><span class="none"></span>Plexus CLI</a></li>
    <li><a href="../../plexus-compiler/" title="Plexus Compiler"><span class="none"></span>Plexus Compiler</a></li>
    <li><a href="../../plexus-digest/" title="Plexus Digest"><span class="none"></span>Plexus Digest</a></li>
    <li><a href="../../plexus-i18n/" title="Plexus i18n"><span class="none"></span>Plexus i18n</a></li>
    <li><a href="../../plexus-interactivity/" title="Plexus Interactivity"><span class="none"></span>Plexus Interactivity</a></li>
    <li><a href="../../plexus-interpolation/" title="Plexus Interpolation"><span class="none"></span>Plexus Interpolation</a></li>
    <li><a href="../../plexus-io/" title="Plexus IO"><span class="none"></span>Plexus IO</a></li>
    <li><a href="../../plexus-languages/" title="Plexus Languages"><span class="none"></span>Plexus Languages</a></li>
    <li><a href="../../plexus-resources/" title="Plexus Resources"><span class="none"></span>Plexus Resources</a></li>
    <li><a href="../../plexus-swizzle/" title="Plexus Swizzle"><span class="none"></span>Plexus Swizzle</a></li>
    <li><a href="../../plexus-velocity/" title="Plexus Velocity"><span class="none"></span>Plexus Velocity</a></li>
    </ul>
</li>
    <li><a href="../../" title="Plexus Parent POMs"><span class="icon-chevron-down"></span>Plexus Parent POMs</a>
    <ul class="nav nav-list">
    <li><a href="../../plexus-pom/" title="Plexus"><span class="none"></span>Plexus</a></li>
    <li><a href="../../plexus-components/" title="Plexus Components"><span class="none"></span>Plexus Components</a></li>
    </ul>
</li>
    <li><a href="../../plexus-utils/" title="Plexus Utils"><span class="none"></span>Plexus Utils</a></li>
</ul>
<form id="search-form" action="https://www.google.com/search" method="get" >
  <input value="http://codehaus-plexus.github.io/" name="sitesearch" type="hidden"/>
  <input class="search-query" name="q" id="query" type="text" />
</form>
<script type="text/javascript">asyncJs( 'https://cse.google.com/brand?form=search-form' )</script>
          <hr />
          <div id="poweredBy">
    <script type="text/javascript">asyncJs( 'https://apis.google.com/js/plusone.js' )</script>
    <div class="g-plusone" data-href="http://codehaus-plexus.github.io/" data-size="tall" ></div>
            <div class="clear"></div>
            <div class="clear"></div>
            <div class="clear"></div>
            <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="../../images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </div>
        <div id="bodyColumn"  class="span10" >
<p><tt>The contents of this document are a work in progress</tt></p>
<div class="section">
<h2><a name="Creating_a_Component_.27Role.27"></a>Creating a Component 'Role'</h2>
<p>If you browse through the sources generated by the Plexus component archetype used for preparing and setting up our project, you will see that we have:</p>
<ol style="list-style-type: decimal">
<li>an Interface &quot;HelloWorld.java&quot; , and</li>
<li>a Class &quot;DefaultHelloWorld.java&quot; which implements the interface in (1) above.</li>
<li>a Component Descriptor &quot;components.xml&quot; located under <i>project-root</i>/src/main/resources/META-INF/
<p>Components are registered with Plexus Container based on &quot;ROLE&quot; they can play or implement. If you look at the interface sources you will notice the ROLE specified by that interface. The class DefaultHelloWorld is the provider or concrete implementation of the interface HelloWorld. It can reside within the same JAR as the inteface or a different one. Think of ROLE as a key that can be used to query the Plexus Container for an implementation. The component descriptor, as the name implies, describes our component. We will revisit it again in later chapters but for the moment, know that the descriptor holds:</p></li>
<li>the ROLE that the component implements or acts a provider for.</li>
<li>the configuration for the component implementation.
<p>When Plexus Container starts up, it uses Classworlds (the library that handles the classloading) to discover any Plexus components. It does this by looking for component descriptors (<a href="/guides/developer-guide/configuration/component-descriptor.html">More on Component Descriptor here </a>) under standard location - META-INF/plexus.</p>
<p>That's enough to start tinkering with your website monitor component, so let's get our hands dirty! Identify a Component Role</p>
<p>Delete the .java files from the sources (under src/main and src/test ) that were generated by the archetype. The first thing we need to do is to identify a ROLE for our component - WebsiteMonitor.</p>
<div class="source"><pre class="prettyprint linenums">public interface WebsiteMonitor {

    /**
     * Role used to register component implementations with the container.
     */
    String ROLE = WebsiteMonitor.class.getName ();


    /**
     * Monitor the specified website.
     *
     * @param website
     *            Website URL to monitor
     * @throws Exception
     *             error encountered while performing the monitoring request.
     */
    public void monitor(String website) throws Exception;
}</pre></div></li></ol></div>
<div class="section">
<h2><a name="Create_provider_for_the_Role"></a>Create provider for the Role</h2>
<p>Lets create a bare-bones implementation of a provider for the component Role that we identified above and gradually flesh it out.</p>
<div class="source"><pre class="prettyprint linenums">public class DefaultWebsiteMonitor implements WebsiteMonitor {

    /*
     * (non-Javadoc)
     *
     * @see org.codehaus.plexus.tutorial.WebsiteMonitor#monitor(java.lang.String)
     */
    public void monitor(String website) throws Exception {
    // TODO implement

    }

}</pre></div></div>
<div class="section">
<h2><a name="Create_a_Component_descriptor"></a>Create a Component descriptor</h2>
<p>Locate the component descriptor for our component provider under <i>project-root</i>/src/main/resources/META-INF/plexus/component.xml. Edit its content to reflect as below:</p>
<div class="source"><pre class="prettyprint linenums">&lt;component-set&gt;
  &lt;components&gt;
    &lt;component&gt;
      &lt;role&gt;org.codehaus.plexus.tutorial.WebsiteMonitor&lt;/role&gt;
      &lt;implementation&gt;
        org.codehaus.plexus.tutorial.DefaultWebsiteMonitor
      &lt;/implementation&gt;
      &lt;configuration/&gt;
    &lt;/component&gt;
  &lt;/components&gt;
&lt;/component-set&gt;</pre></div>
<p>Before we implement the the provider, we need to update our project dependencies and include Jakarta Commons HttpClient library. To do this, locate pom.xml under <i>project-root</i> and edit it to reflect the <i>dependencies</i> section of our pom.xml as below:</p>
<div class="source"><pre class="prettyprint linenums">&lt;dependencies&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.codehaus.plexus&lt;/groupId&gt;
      &lt;artifactId&gt;plexus-container-default&lt;/artifactId&gt;
      &lt;version&gt;1.0-alpha-9&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;junit&lt;/groupId&gt;
      &lt;artifactId&gt;junit&lt;/artifactId&gt;
      &lt;version&gt;3.8.1&lt;/version&gt;
      &lt;scope&gt;test&lt;/scope&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;commons-httpclient&lt;/groupId&gt;
      &lt;artifactId&gt;commons-httpclient&lt;/artifactId&gt;
      &lt;version&gt;3.0.1&lt;/version&gt;
    &lt;/dependency&gt;
  &lt;/dependencies&gt;</pre></div>
<p>Update Eclipse project dependencies for new library that we added above, to do this: </p>
<ol style="list-style-type: decimal">
<li>Open up a command prompt window</li>
<li>Change directory to the Website Monitor project's folder, and</li>
<li>Run the following command to update the Eclipse project dependencies. 
<div class="source"><pre class="prettyprint linenums">mvn  eclipse:clean  eclipse:eclipse</pre></div></li></ol>
<p>Refresh the Eclipse project in the workspace to reflect the updated dependencies.</p>
<p>We are now ready to start writing some unit tests for our (yet empty) component and drilling some useful implementation details into it!</p></div>
        </div>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>Copyright &copy;2001&#x2013;2018
<a href="http://codehaus-plexus.github.io/">Codehaus Plexus</a>.
All rights reserved.</p>
        </div>
      </div>
    </footer>
  </body>
</html>