<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2015-09-13 
 | Rendered using Apache Maven Fluido Skin 1.4
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="author" content="Rahul Thakur" />
    <meta name="Date-Revision-yyyymmdd" content="20150913" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Plexus &#x2013; Plexus Embedder and Component lookups</title>
    <link rel="stylesheet" href="../../css/apache-maven-fluido-1.4.min.css" />
    <link rel="stylesheet" href="../../css/site.css" />
    <link rel="stylesheet" href="../../css/print.css" media="print" />

      
    <script type="text/javascript" src="../../js/apache-maven-fluido-1.4.min.js"></script>

                          
        
<link rel="icon" type="image/x-icon" href="/favicon.ico"/>
                      
        
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico"/>
          
                  </head>
        <body class="topBarDisabled">
          
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                                  <a href="../.././" id="bannerLeft">
                                                                                                <img src="../../images/plexus-logo-trans.png"  alt="Plexus"/>
                </a>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                              <li class="">
                    <a href="../../" title="Plexus">
        Plexus</a>
                    <span class="divider">/</span>
      </li>
        <li class="active ">Plexus Embedder and Component lookups</li>
        
                
                    
                  <li id="publishDate" class="pull-right"><span class="divider">|</span> Last Published: 2015-09-13</li>
            
                                    
    <li class="pull-right">
                      <a href="../.././" title="Plexus">
        Plexus</a>
      </li>

                    </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Parent Project</li>
                              
      <li>
  
                          <a href="../../dav:https:/dav.codehaus.org/plexus/index.html" title="Plexus">
          <span class="none"></span>
        Plexus</a>
            </li>
                                        <li class="nav-header">Plexus</li>
                              
      <li>
  
                          <a href="../../index.html" title="Overview">
          <span class="none"></span>
        Overview</a>
            </li>
                              <li class="nav-header">Plexus Projects</li>
                              
      <li>
  
                          <a href="../../modello/" title="Modello">
          <span class="none"></span>
        Modello</a>
            </li>
                
      <li>
  
                          <a href="../../plexus-classworlds/" title="Plexus Classworlds">
          <span class="none"></span>
        Plexus Classworlds</a>
            </li>
                
      <li>
  
                          <a href="../../plexus-containers/" title="Plexus Container">
          <span class="none"></span>
        Plexus Container</a>
            </li>
                
      <li>
  
                          <a href="../../plexus-components/" title="Plexus Components">
          <span class="none"></span>
        Plexus Components</a>
            </li>
                
      <li>
  
                          <a href="../../plexus-utils/" title="Plexus Utils">
          <span class="none"></span>
        Plexus Utils</a>
            </li>
                              <li class="nav-header">Downloads</li>
                              
      <li>
  
                          <a href="../../source-repository.html" title="Sources">
          <span class="none"></span>
        Sources</a>
            </li>
                
      <li>
  
                          <a href="../../download-binaries.html" title="Binaries">
          <span class="none"></span>
        Binaries</a>
            </li>
                              <li class="nav-header">Books</li>
                              
      <li>
  
                          <a href="../../writing-components-trail/index.html" title="Writing Components">
          <span class="none"></span>
        Writing Components</a>
            </li>
                              <li class="nav-header">Guides</li>
                              
      <li>
  
                          <a href="../../guides/quick-start/getting-started.html" title="Quick Start">
          <span class="none"></span>
        Quick Start</a>
            </li>
                
      <li>
  
                          <a href="../../guides/writing-components/00_index.html" title="Writing Plexus Components">
          <span class="none"></span>
        Writing Plexus Components</a>
            </li>
                
      <li>
  
                          <a href="../../guides/developer-guide/index.html" title="Developer Guide">
          <span class="none"></span>
        Developer Guide</a>
            </li>
                              <li class="nav-header">Reference</li>
                              
      <li>
  
                          <a href="../../ref/why-use-components.html" title="Why Use Components?">
          <span class="none"></span>
        Why Use Components?</a>
            </li>
                
      <li>
  
                          <a href="../../ref/plexus-descriptor.html" title="Plexus Descriptor">
          <span class="none"></span>
        Plexus Descriptor</a>
            </li>
                
      <li>
  
                          <a href="../../guides/developer-guide/configuration/component-descriptor.html" title="Component Descriptor">
          <span class="none"></span>
        Component Descriptor</a>
            </li>
                
      <li>
  
                          <a href="../../ref/component-configuration.html" title="Component Configuration">
          <span class="none"></span>
        Component Configuration</a>
            </li>
                
      <li>
  
                          <a href="../../ref/technical-articles.html" title="Technical Articles">
          <span class="none"></span>
        Technical Articles</a>
            </li>
                
      <li>
  
                          <a href="../../ref/available-components.html" title="Available Components">
          <span class="none"></span>
        Available Components</a>
            </li>
                
      <li>
  
                          <a href="../../faq.html" title="FAQs">
          <span class="none"></span>
        FAQs</a>
            </li>
                              <li class="nav-header">Community</li>
                              
      <li>
  
                          <a href="../../mail-lists.html" title="Mailing Lists">
          <span class="none"></span>
        Mailing Lists</a>
            </li>
                
      <li>
  
                          <a href="../../irc.html" title="IRC">
          <span class="none"></span>
        IRC</a>
            </li>
                
      <li>
  
                          <a href="../../get-involved.html" title="Get Involved">
          <span class="none"></span>
        Get Involved</a>
            </li>
                                        <li class="nav-header">Project Documentation</li>
                                                                                                                                      
      <li>
  
                          <a href="../../project-info.html" title="Project Information">
          <span class="icon-chevron-right"></span>
        Project Information</a>
                  </li>
                              <li class="nav-header">Plexus Projects</li>
                              
      <li>
  
                          <a href="../../dav:https:/dav.codehaus.org/plexus/plexus-classworlds/" title="Plexus Classworlds">
          <span class="none"></span>
        Plexus Classworlds</a>
            </li>
                
      <li>
  
                          <a href="../../dav:https:/dav.codehaus.org/plexus/plexus-containers/" title="Plexus Container">
          <span class="none"></span>
        Plexus Container</a>
            </li>
                
      <li>
  
                          <a href="../../dav:https:/dav.codehaus.org/plexus/plexus-components/" title="Plexus Components">
          <span class="none"></span>
        Plexus Components</a>
            </li>
                
      <li>
  
                          <a href="../../dav:https:/dav.codehaus.org/plexus/plexus-utils/" title="Plexus Utils">
          <span class="none"></span>
        Plexus Utils</a>
            </li>
            </ul>
                
                    
                            <form id="search-form" action="https://www.google.com/search" method="get" >
    
  <input value="http://codehaus-plexus.github.io/" name="sitesearch" type="hidden"/>
  <input class="search-query" name="q" id="query" type="text" />
</form>
<script type="text/javascript" src="https://www.google.com/coop/cse/brand?form=search-form"></script>
          
          <hr />

           <div id="poweredBy">
                   
    <script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>

    
    <div class="g-plusone" data-href="http://codehaus-plexus.github.io/" data-size="tall" ></div>

                   <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="../../images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span10" >
                                  
            <p><tt>The contents of this document are a work in progress</tt></p>
<div class="section">
<h2><a name="Plexus_Embedder"></a>Plexus Embedder</h2>
<p>The Plexus Embedder allows us to set up and start a Plexus Container container from within a Standalone application. The components can then be looked up in usual manner (we will see demonstrate in bit, if you don't know). </p>
<div class="section">
<h3><a name="Making_Embedder_available_to_the_application"></a>Making Embedder available to the application </h3>
<p>First thing, we need to make the Embedder available to our application by adding a dependency on it in the <tt>pom.xml</tt>. Follow snippet shows the relevant <tt>&lt;dependency</tt>&gt; section of the application project's <tt>pom.xml</tt>.</p>
<div class="source"><pre class="prettyprint linenums">
&lt;project&gt;
  ...
  &lt;dependencies&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;junit&lt;/groupId&gt;
      &lt;artifactId&gt;junit&lt;/artifactId&gt;
      &lt;version&gt;3.8.1&lt;/version&gt;
      &lt;scope&gt;test&lt;/scope&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.codehaus.plexus&lt;/groupId&gt;
      &lt;artifactId&gt;plexus-website-monitor-component&lt;/artifactId&gt;
      &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
    &lt;/dependency&gt;    
    &lt;!-- Dependency to fetch Plexus Container implementation --&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.codehaus.plexus&lt;/groupId&gt;
      &lt;artifactId&gt;plexus-container-default&lt;/artifactId&gt;
      &lt;version&gt;1.0-alpha-9&lt;/version&gt;     
    &lt;/dependency&gt;
  &lt;/dependencies&gt;
  ...
&lt;/project&gt;
</pre></div>
<p>Regenerate the IDE project again as discussed in the previous section.</p></div>
<div class="section">
<h3><a name="Starting_up_an_embedded_Plexus_Container_instance"></a>Starting up an embedded Plexus Container instance</h3>
<p>Lets add some code to our Site Monitor application entry class that:</p>
<ol style="list-style-type: decimal">
<li>creates and starts an Embedder instance</li>
<li>Obtains <tt>PlexusContainer</tt> instance, and</li>
<li>performs a lookup for <tt>WebsiteMonitor</tt> component
<p>Our updated code looks as below:</p>
<div class="source"><pre class="prettyprint linenums">public class Main
{

    /**
     * @param args
     */
    public static void main( String[] args )
    {
        Embedder embedder = new Embedder();
        try
        {
            embedder.start();
            PlexusContainer container = embedder.getContainer();
            WebsiteMonitor monitor = (WebsiteMonitor) container.lookup( WebsiteMonitor.ROLE );
            try
            {
                monitor.monitor();
            }
            catch ( Exception e )
            {             
                e.printStackTrace();
            }

        }
        catch ( PlexusContainerException e )
        {
            e.printStackTrace();
        }
        catch ( ComponentLookupException e )
        {
            e.printStackTrace();
        }

    }

}</pre></div>
<p>At this point you can try running the above <tt>Main</tt> class from your favorite IDE. For demonstration purposes the <tt>WebsiteMonitor</tt> is by default configured to monitor <tt>http://plexus.codehaus.org</tt>. You should see it output the HTTP status for the monitoring request issued. </p>
<p>Something like this:</p>
<div class="source"><pre class="prettyprint linenums">[INFO] HTTP request returned HTTP status code: 200 for website: http://plexus.codehaus.org/</pre></div></li></ol></div>
<div class="section">
<h3><a name="How_does_Plexus_Embedder_works"></a>How does Plexus Embedder works?</h3>
<p>Plexus Embedder creates an instance of Plexus Container, which then loads and parses all available dependencies to discover any Plexus Components and registers them internally to make them available for look-ups. </p>
<p>To recapture again, the container looks for a Component descriptor under:</p>
<ol style="list-style-type: decimal">
<li>META-INF/plexus/components.xml
<p>This is exactly what those few lines of code achieve in the above snippet. You can, of course, use the Embedder to do fancier stuff.</p>
<p>Great! we have just finished integrating our site monitor component into our site monitor application.</p></li></ol></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                                      <p >Copyright &copy;                    2001&#x2013;2015
                        <a href="http://codehaus-plexus.github.io/">Codehaus Plexus</a>.
            All rights reserved.      
                    
      </p>
                </div>

        
                </div>
    </footer>
        </body>
</html>